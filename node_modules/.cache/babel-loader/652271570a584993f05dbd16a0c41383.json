{"ast":null,"code":"import { Keys } from '@progress/kendo-react-common';\nimport { getFirstChildId, isIdZeroLevel, getRootParentId, isIdFirstLevel, getDirectParentId, getShortId, createId, getDirectSiblingIdForLevelZero, getItemById as getItemByIdUtil } from './itemsIdsUtils';\nvar NO_WHITESPACE_REGEX = /\\S/;\n/**\n * @hidden\n * Returns the `itemId` (string) for applicable key codes even when the id has not changed.\n * For key codes that are not applicable, returns `undefined`.\n */\nexport function getNewItemIdUponKeyboardNavigation(sourceItems, sourceItemId, keyCode, key, isMenuVertical, isDirectionRightToLeft) {\n  var sourceItem = getItemById();\n  switch (keyCode) {\n    case Keys.left:\n      return getIdUponLeftKey();\n    case Keys.right:\n      return getIdUponRightKey();\n    case Keys.up:\n      return getIdUponUpKey();\n    case Keys.down:\n      return getIdUponDownKey();\n    case Keys.enter:\n    case Keys.space:\n      return getIdUponEnterAndSpaceKeys();\n    case Keys.home:\n      return getIdUponHomeKey();\n    case Keys.end:\n      return getIdUponEndKey();\n    case Keys.esc:\n      return getIdUponEscKey();\n    default:\n      return isSearchableKey() ? getIdUponSearchByChar() : sourceItemId;\n  }\n  function getIdUponLeftKey() {\n    if (isMenuVertical) {\n      return isDirectionRightToLeft ? getIdUponRightKeyForVerticalMenu() : getIdUponLeftKeyForVerticalMenu();\n    } else {\n      return isDirectionRightToLeft ? getIdUponRightKeyForHorizontalMenu() : getIdUponLeftKeyForHorizontalMenu();\n    }\n  }\n  function getIdUponRightKey() {\n    if (isMenuVertical) {\n      return isDirectionRightToLeft ? getIdUponLeftKeyForVerticalMenu() : getIdUponRightKeyForVerticalMenu();\n    } else {\n      return isDirectionRightToLeft ? getIdUponLeftKeyForHorizontalMenu() : getIdUponRightKeyForHorizontalMenu();\n    }\n  }\n  function getIdUponDownKey() {\n    if (isMenuVertical) {\n      return getNextSiblingId();\n    } else {\n      if (isIdZeroLevel(sourceItemId)) {\n        return getFirstChildIdForEnabledItemOrGetSameId();\n      } else {\n        return getNextSiblingId();\n      }\n    }\n  }\n  function getIdUponUpKey() {\n    if (isMenuVertical) {\n      return getPrevSiblingId();\n    } else {\n      if (isIdZeroLevel(sourceItemId)) {\n        return getLastChildIdForEnabledItemOrGetSameId();\n      } else {\n        return getPrevSiblingId();\n      }\n    }\n  }\n  function getIdUponEnterAndSpaceKeys() {\n    if (sourceItem.disabled) {\n      return sourceItemId;\n    } else {\n      return hasChildren() ? getFirstChildId(sourceItemId) : getRootParentId(sourceItemId);\n    }\n  }\n  function getIdUponHomeKey() {\n    return getSiblings()[0].id;\n  }\n  function getIdUponEndKey() {\n    var siblings = getSiblings();\n    return siblings[siblings.length - 1].id;\n  }\n  function getIdUponEscKey() {\n    return isIdZeroLevel(sourceItemId) ? sourceItemId : getDirectParentId(sourceItemId);\n  }\n  function getIdUponSearchByChar() {\n    var searchChar = key.toLowerCase();\n    var siblings = getSiblings();\n    var currentItemIndex = Number(getShortId(sourceItemId));\n    var itemsToSearch = siblings.slice(currentItemIndex + 1).concat(siblings.slice(0, currentItemIndex + 1));\n    var matchedSibling = itemsToSearch.find(function (item) {\n      return (item.text || '').toLowerCase().startsWith(searchChar);\n    });\n    return matchedSibling ? matchedSibling.id : sourceItemId;\n  }\n  // #region Left Key Internals\n  function getIdUponLeftKeyForHorizontalMenu() {\n    if (isIdZeroLevel(sourceItemId)) {\n      return getPrevSiblingId();\n    } else if (isIdFirstLevel(sourceItemId)) {\n      return getFirstChildIdForEnabledItemOrGetSameId(getPrevSiblingId(getRootParentId(sourceItemId)));\n    } else {\n      return getDirectParentId(sourceItemId);\n    }\n  }\n  function getIdUponLeftKeyForVerticalMenu() {\n    if (isIdZeroLevel(sourceItemId)) {\n      return getLastChildIdForEnabledItemOrGetSameId();\n    } else {\n      return getDirectParentId(sourceItemId);\n    }\n  }\n  // #endregion\n  // #region Right Key Internals\n  function getIdUponRightKeyForHorizontalMenu() {\n    if (isIdZeroLevel(sourceItemId)) {\n      return getNextSiblingId();\n    } else {\n      return getFirstChildIdForEnabledItemOrGetSameId(hasChildren() ? sourceItemId : getNextSiblingId(getRootParentId(sourceItemId)));\n    }\n  }\n  function getIdUponRightKeyForVerticalMenu() {\n    return getFirstChildIdForEnabledItemOrGetSameId(isIdZeroLevel(sourceItemId) || hasChildren() ? sourceItemId : getNextSiblingId(getRootParentId(sourceItemId)));\n  }\n  // #endregion\n  // #region Utils\n  function getFirstChildIdForEnabledItemOrGetSameId(itemId) {\n    return getFirstOrLastChildIdForEnabledItemOrGetSameId(true, itemId);\n  }\n  function getLastChildIdForEnabledItemOrGetSameId(itemId) {\n    return getFirstOrLastChildIdForEnabledItemOrGetSameId(false, itemId);\n  }\n  function isSearchableKey() {\n    return key.length === 1 && NO_WHITESPACE_REGEX.test(key);\n  }\n  function getItemById(itemId, items) {\n    if (itemId === undefined) {\n      itemId = sourceItemId;\n    }\n    if (items === undefined) {\n      items = sourceItems;\n    }\n    return getItemByIdUtil(itemId, items);\n  }\n  function hasChildren(itemId) {\n    return getItemById(itemId).items.length > 0;\n  }\n  function getPrevSiblingId(itemId) {\n    return getSiblingId(false, itemId);\n  }\n  function getNextSiblingId(itemId) {\n    return getSiblingId(true, itemId);\n  }\n  function getLastChildId(itemId) {\n    var itemChildren = getItemById(itemId).items;\n    return itemChildren[itemChildren.length - 1].id;\n  }\n  function getSiblings() {\n    return isIdZeroLevel(sourceItemId) ? sourceItems : getItemById(getDirectParentId(sourceItemId), sourceItems).items;\n  }\n  function getFirstOrLastChildIdForEnabledItemOrGetSameId(getFirstChild, itemId) {\n    if (itemId === undefined) {\n      itemId = sourceItemId;\n    }\n    var item = getItemById(itemId);\n    if (hasChildren(itemId) && !item.disabled) {\n      return getFirstChild ? getFirstChildId(itemId) : getLastChildId(itemId);\n    } else {\n      return itemId;\n    }\n  }\n  function getSiblingId(next, itemId) {\n    if (itemId === undefined) {\n      itemId = sourceItemId;\n    }\n    if (isIdZeroLevel(itemId)) {\n      return getDirectSiblingIdForLevelZero(next, itemId, sourceItems.length);\n    } else {\n      var directParentId = getDirectParentId(itemId);\n      var shortId = getShortId(itemId);\n      var siblingsCount = getItemById(directParentId).items.length;\n      return createId(getDirectSiblingIdForLevelZero(next, shortId, siblingsCount), directParentId);\n    }\n  }\n  // #endregion\n}","map":null,"metadata":{},"sourceType":"module"}