{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport * as React from 'react';\nimport { classNames } from '@progress/kendo-react-common';\nimport { Popup } from '@progress/kendo-react-popup';\nimport { shouldOpenItem, isFirstItemFromSiblings } from '../utils/itemsIdsUtils';\nimport { getPopupSettings, convertBoolDirectionToString, getDOMElementId } from '../utils/misc';\nimport { MenuItemLink } from './MenuItemLink';\nimport { MenuItemInternalsList } from './MenuItemInternalsList';\nimport { MenuItemArrow } from './MenuItemArrow';\n/**\n * @hidden\n */\nvar MenuItemInternal = /** @class */function (_super) {\n  __extends(MenuItemInternal, _super);\n  function MenuItemInternal(props) {\n    var _this = _super.call(this, props) || this;\n    _this.isFirstRender = true;\n    _this.onMouseOver = function (event) {\n      _this.props.onMouseOver(_this.props.item.id);\n      event.stopPropagation();\n    };\n    _this.onMouseLeave = function (event) {\n      _this.props.onMouseLeave(_this.props.item.id);\n      event.stopPropagation();\n    };\n    _this.state = {\n      opened: false\n    };\n    return _this;\n  }\n  MenuItemInternal.prototype.componentDidMount = function () {\n    var focusedItemId = this.props.focusedItemId;\n    var currentItemId = this.props.item.id;\n    // If the menu item component has been just mounted due to\n    // keyboard navigation and it is the selected one.\n    if (focusedItemId && focusedItemId === currentItemId) {\n      this.itemElement.focus();\n    }\n    this.isFirstRender = false;\n  };\n  MenuItemInternal.prototype.componentDidUpdate = function (prevProps) {\n    var focusedItemId = this.props.focusedItemId;\n    var currentItemId = this.props.item.id;\n    if (focusedItemId) {\n      // If the item has been navigated to via the keyboard navigation\n      // (Clicking and focusing an item also come here).\n      if (prevProps.focusedItemId !== focusedItemId && focusedItemId === currentItemId\n      // https://github.com/telerik/kendo-react/issues/216 :\n      // No need to focus the wrapping menu item DOM element\n      // when a child DOM element was clicked.\n      && !this.itemElement.contains(document.activeElement)) {\n        this.itemElement.focus();\n      }\n    } else if (document.activeElement === this.itemElement) {\n      this.itemElement.blur();\n    }\n  };\n  MenuItemInternal.prototype.render = function () {\n    var _this = this;\n    var item = this.props.item;\n    var itemId = item.id;\n    return React.createElement(React.Fragment, null, React.createElement(\"li\", {\n      className: this.getMenuItemClassName(item),\n      style: item.cssStyle,\n      tabIndex: itemId === this.props.tabbableItemId ? 0 : -1,\n      onMouseOver: this.onMouseOver,\n      onMouseLeave: this.onMouseLeave,\n      onMouseDown: function onMouseDown(event) {\n        return _this.props.onMouseDown(event);\n      },\n      onBlur: function onBlur() {\n        return _this.props.onBlur(itemId);\n      },\n      onFocus: function onFocus() {\n        return _this.props.onFocus(itemId);\n      },\n      onClick: function onClick(event) {\n        return _this.props.onClick(event, itemId);\n      },\n      role: \"menuitem\",\n      \"aria-disabled\": item.disabled ? true : undefined,\n      \"aria-haspopup\": item.items.length > 0 ? true : undefined,\n      \"aria-expanded\": item.items.length > 0 ? this.Opened : undefined,\n      \"aria-label\": item.text,\n      \"aria-owns\": this.Opened ? getDOMElementId(this.props.menuGuid, itemId) : undefined,\n      ref: function ref(el) {\n        return _this.itemElement = el;\n      },\n      key: \"0\"\n    }, this.contentRender ? this.renderContent() : this.renderMenuItemLink()), this.renderPopupIfOpened());\n  };\n  MenuItemInternal.prototype.renderContent = function () {\n    var itemId = this.props.item.contentParentItemId;\n    return React.createElement(\"div\", {\n      className: \"k-content\",\n      role: \"presentation\"\n    }, React.createElement(this.contentRender, {\n      item: this.props.onOriginalItemNeeded(itemId),\n      itemId: itemId\n    }));\n  };\n  MenuItemInternal.prototype.renderMenuItemLink = function () {\n    var item = this.props.item;\n    if (this.linkRender) {\n      return React.createElement(this.linkRender, {\n        item: this.props.onOriginalItemNeeded(item.id),\n        itemId: item.id,\n        opened: this.Opened,\n        dir: convertBoolDirectionToString(this.props.isDirectionRightToLeft)\n      });\n    } else {\n      var textOrItemRender = this.itemRender ? React.createElement(this.itemRender, {\n        item: this.props.onOriginalItemNeeded(item.id),\n        itemId: item.id,\n        key: \"1\"\n      }) : React.createElement(\"span\", {\n        className: \"k-menu-link-text\"\n      }, item.text);\n      return React.createElement(MenuItemLink, {\n        url: item.url,\n        opened: this.Opened\n      }, this.renderMenuIconIfApplicable(), textOrItemRender, this.renderArrowIfApplicable());\n    }\n  };\n  MenuItemInternal.prototype.renderPopupIfOpened = function () {\n    if (this.Opened) {\n      var itemId = this.props.item.id;\n      var _a = getPopupSettings(itemId, this.props.isMenuVertical, this.props.isDirectionRightToLeft),\n        anchorAlign = _a.anchorAlign,\n        popupAlign = _a.popupAlign,\n        collision = _a.collision;\n      return React.createElement(Popup, {\n        anchor: this.itemElement,\n        show: true,\n        popupClass: this.getPopupClassName(),\n        anchorAlign: anchorAlign,\n        popupAlign: popupAlign,\n        collision: collision,\n        animate: false,\n        key: \"1\"\n      }, React.createElement(MenuItemInternalsList, {\n        parentItemId: itemId,\n        items: this.props.item.items,\n        menuGuid: this.props.menuGuid,\n        focusedItemId: this.props.focusedItemId,\n        lastItemIdToBeOpened: this.props.lastItemIdToBeOpened,\n        tabbableItemId: this.props.tabbableItemId,\n        itemRender: this.props.itemRender,\n        linkRender: this.props.linkRender,\n        isMenuVertical: this.props.isMenuVertical,\n        isDirectionRightToLeft: this.props.isDirectionRightToLeft,\n        className: \"k-group k-menu-group k-reset k-menu-group-md\",\n        onMouseOver: this.props.onMouseOver,\n        onMouseLeave: this.props.onMouseLeave,\n        onMouseDown: this.props.onMouseDown,\n        onBlur: this.props.onBlur,\n        onFocus: this.props.onFocus,\n        onClick: this.props.onClick,\n        onOriginalItemNeeded: this.props.onOriginalItemNeeded\n      }));\n    } else {\n      return null;\n    }\n  };\n  MenuItemInternal.prototype.renderMenuIconIfApplicable = function () {\n    return this.props.item.icon ? React.createElement(\"span\", {\n      className: \"k-icon k-i-\".concat(this.props.item.icon),\n      role: \"presentation\",\n      key: \"0\"\n    }) : null;\n  };\n  MenuItemInternal.prototype.renderArrowIfApplicable = function () {\n    return this.props.item.items.length > 0 ? React.createElement(MenuItemArrow, {\n      itemId: this.props.item.id,\n      verticalMenu: this.props.isMenuVertical,\n      dir: convertBoolDirectionToString(this.props.isDirectionRightToLeft),\n      key: \"2\"\n    }) : null;\n  };\n  Object.defineProperty(MenuItemInternal.prototype, \"itemRender\", {\n    get: function get() {\n      return this.props.item.render || this.props.itemRender;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MenuItemInternal.prototype, \"linkRender\", {\n    get: function get() {\n      return this.props.item.linkRender || this.props.linkRender;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MenuItemInternal.prototype, \"contentRender\", {\n    get: function get() {\n      return this.props.item.contentParentItemId ? this.props.item.contentRender : null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MenuItemInternal.prototype, \"Opened\", {\n    get: function get() {\n      var props = this.props;\n      return props.item.items.length > 0 && shouldOpenItem(props.item.id, props.lastItemIdToBeOpened) &&\n      // HACK: Wait for the second render because otherwise the scenario of\n      // popup inside popup throws an error (for example, hover of item with id '0_0').\n      !this.isFirstRender;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  MenuItemInternal.prototype.getPopupClassName = function () {\n    return classNames('k-menu-popup', {\n      'k-rtl': this.props.isDirectionRightToLeft\n    });\n  };\n  MenuItemInternal.prototype.getMenuItemClassName = function (item) {\n    return classNames('k-item', 'k-menu-item', {\n      'k-first': isFirstItemFromSiblings(item.id),\n      'k-last': item.isLastFromSiblings,\n      'k-disabled': item.disabled\n    }, item.cssClass);\n  };\n  return MenuItemInternal;\n}(React.Component);\nexport { MenuItemInternal };","map":null,"metadata":{},"sourceType":"module"}